--- a/.gitlab-ci.yml
+++ b/.gitlab-ci.yml
@@
+# Native Slack template
+include:
+  - template: Slack/Messages.gitlab-ci.yml
+
@@
-default:
-  image: maven:3.9-eclipse-temurin-17@sha256:1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef
+default:
+  image: maven:3.9-eclipse-temurin-17@sha256:<real-digest-here>
@@
-  - build
-  - test
+  - build          # compile+test merged
@@
-# Build & Unit Tests (matrix build for Java 17/21 and MySQL/Postgres)
-build_compile:
+# Build & Unit Tests (single matrix job)
+build_test:
@@
-      - LANG: ["java17", "java21"]
-        DB: ["mysql", "postgres"]
-  script:
-    - mvn -B -P${LANG} clean compile
+      - LANG: ["java17", "java21"]
+        DB:   ["mysql", "postgres"]
+  script:
+    - mvn -B -P${LANG} clean compile test
@@
-  artifacts:
-    paths:
-      - target/*
-    expire_in: 1 day
-  timeout: 10m
+  artifacts:
+    paths: [ target/*.jar ]
+    reports:
+      junit: "**/target/surefire-reports/*.xml"
+    expire_in: 1 day
+  timeout: 20m
+
+# ----- removed build_compile/unit_tests/stash_artifacts jobs -----
@@
-docker_build_push:
+docker_build_push:
   stage: docker-build
-  image: docker:24@sha256:fedcba9876543210fedcba9876543210fedcba9876543210fedcba9876543210
+  image: docker:24@sha256:<real-digest-here>
@@
-    - docker:dind@sha256:abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890
+    - docker:dind@sha256:<real-digest-here>
@@
-publish_artifacts:
+publish_artifacts:
   stage: publish
-  image: "curlimages/curl@sha256:3210fedcba9876543210fedcba9876543210fedcba9876543210fedcba987654"
-  needs:
-    - job: stash_artifacts
-      artifacts: true
+  image: curlimages/curl@sha256:<real-digest-here>
+  needs: [ build_test ]
@@
-deploy_k8s:
+deploy_k8s:
   stage: deploy
-  image: "bitnami/kubectl:latest@sha256:7890abcdef1234567890abcdef1234567890abcdef1234567890abcdef123456"
+  image: bitnami/kubectl:latest@sha256:<real-digest-here>
@@
   script:
+  environment:
+    name: "$ENV"
+    url: "https://$ENV.example.com"
+  resource_group: jenkins-scanner-prod
@@
-e2e_tests:
+e2e_tests:
   stage: e2e
-  image: cypress/included:12.17.1@sha256:4567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234
+  image: cypress/included:12.17.1@sha256:<real-digest-here>
@@
-security_scan:
+security_scan:
   stage: test
-  image: "aquasec/trivy:latest@sha256:9876543210fedcba9876543210fedcba9876543210fedcba9876543210fedcba"
+  image: aquasec/trivy:latest@sha256:<real-digest-here>
@@
-# Post-build Notifications
-success_notification:
-failure_notification:
-  # (deleted â€“ handled by Slack template)
+# Post-build cleanup only (Slack handled by template)
